# 기본 화면 구성

## 1. 전체 구조 개요

```
src/app/
├── _layout.tsx          # 루트 레이아웃 (앱 진입점)
├── (tabs)/              # 탭 네비게이션 그룹
│   ├── _layout.tsx      # 탭 레이아웃 (하단 탭바)
│   ├── index.tsx        # Home 탭 (홈 화면)
│   └── explore.tsx      # Explore 탭
├── (auth)/              # 인증 화면 그룹
│   ├── _layout.tsx      # 인증 레이아웃
│   └── login.tsx        # 로그인 화면
└── modal.tsx            # 모달 화면
```

---

## 2. 루트 레이아웃 (`_layout.tsx`)

앱의 최상위 레이아웃으로, 다음을 담당:

- **사용자 초기화**: 앱 시작 시 SecureStore에서 토큰 확인 → 유효하면 사용자 정보 로드
- **스플래시 스크린**: 초기화 완료까지 표시
- **전역 Provider 설정**: QueryClient, Theme 등
- **Stack 네비게이션**: (tabs), (auth), modal 화면 관리

```
┌─────────────────────────────────┐
│         RootLayout              │
│  ┌───────────────────────────┐  │
│  │   QueryClientProvider     │  │
│  │  ┌─────────────────────┐  │  │
│  │  │   ThemeProvider     │  │  │
│  │  │  ┌───────────────┐  │  │  │
│  │  │  │    Stack      │  │  │  │
│  │  │  │  - (tabs)     │  │  │  │
│  │  │  │  - (auth)     │  │  │  │
│  │  │  │  - modal      │  │  │  │
│  │  │  └───────────────┘  │  │  │
│  │  └─────────────────────┘  │  │
│  └───────────────────────────┘  │
└─────────────────────────────────┘
```

---

## 3. 탭 레이아웃 (`(tabs)/_layout.tsx`)

하단 탭 네비게이션 구성:

| 탭 이름 | 파일 | 아이콘 | 설명 |
|---------|------|--------|------|
| Home | index.tsx | house.fill | 메인 홈 화면 |
| Explore | explore.tsx | paperplane.fill | 탐색 화면 |

```
┌─────────────────────────────────┐
│                                 │
│         탭 컨텐츠 영역           │
│     (index.tsx 또는 explore.tsx) │
│                                 │
│                                 │
├─────────────────────────────────┤
│  [Home]          [Explore]      │  ← 하단 탭바
└─────────────────────────────────┘
```

---

## 4. 홈 화면 (`(tabs)/index.tsx`)

### 화면 흐름

1. `isInitialized` 확인 → false면 null 반환 (로딩 중)
2. `me` (로그인 사용자) 확인 → 없으면 로그인 화면으로 Redirect
3. 로그인 상태면 홈 화면 표시

### 화면 구성

```
┌─────────────────────────────────┐
│  Messenger 👋                   │  ← header (title + HelloWave)
│                                 │
│                                 │
│      안녕하세요, 오현석님!        │  ← content 영역
│  채팅방 목록 및 메신저 기능이     │     (중앙 정렬)
│  곧 구현될 예정입니다.           │
│                                 │
│                                 │
│  ┌───────────────────────────┐  │
│  │        로그아웃            │  │  ← logoutButton
│  └───────────────────────────┘  │
├─────────────────────────────────┤
│  [Home]          [Explore]      │  ← 하단 탭바
└─────────────────────────────────┘
```

### 주요 스타일

- container: paddingTop 60, paddingHorizontal 20
- header: flexDirection row, gap 10
- content: flex 1, 중앙 정렬
- logoutButton: marginBottom 40, 빨간색 (#FF3B30), borderRadius 12

---

## 5. 화면 전환 흐름

```
앱 시작
   │
   ▼
RootLayout (초기화)
   │
   ├─ 토큰 있음 → 사용자 정보 로드 → (tabs)/index.tsx (홈)
   │
   └─ 토큰 없음 또는 실패 → (tabs)/index.tsx → Redirect → (auth)/login.tsx
```

---

## 6. 인증 상태에 따른 화면

| 상태 | 표시 화면 |
|------|-----------|
| 초기화 중 (isInitialized: false) | null (빈 화면, 스플래시) |
| 미로그인 (me: null) | 로그인 화면으로 Redirect |
| 로그인됨 (me: 사용자정보) | 홈 화면 표시 |
